# HTTP란 무엇인가 <Badge text="song" /><Badge text="beta" type="warning" />


## HTTP
`HTTP` 란 Hypertext Transfer Protocol의 줄임말로 팀 버너스리가 신속한 상호 정보 통신을 목적으로 고안한 전송 프로토콜(통신규약)이다.
> 여기서 Hypertext 는 HTML 파일이다.


## HTTP Version

`HTTP` 는 현재 2.0까지 나왔으며 각 버전별로 기능의 차이가 있다.   

### 1. 버전 0.9

- 최초로 만들어졌다.
- 정식 사양이 아니였기에 0.9란 버전이 붙여졌다.
- GET 메소드만 지원한다.
- 초기 버전이라 특별한 기능이 없다.

### 2. 버전 1.0

- 정식 사양으로 처음으로 널리 사용하기 시작한 버전이다.
- GET, POST, HEAD 메소드를 지원한다.
- 요청의 결과를 알 수 있는 상태코드 개념이 추가됐다.
- HTML 외에 다른 파일들도 전송이 가능하게 바꿨다.
- 매번 요청마다 새로운 연결을 끊고 맺는 비연결지향(Connectionless) 방식을 사용하기 떄문에 비효율적이다.
    - 이 전엔 단순히 문서만 주고받았지만 css같은 다른 파일들을 주고받게 되면서 문제가 발생했다.

### 3. 버전 1.0+

- Keep-Alive 커넥션을 지원하여 1.0의 단점을 보완했다.
    - (추가 설명)

### 4. 버전 1.1

- 현재 가장 많이 사용되고 있는 버전
- 이 전 버전들의 문제점을 해결하고 최적화함
- Kepp-Alive가 빠지고 기본으로 지속 연결이 활성화됐다.
    - 요청이 끝남을 Connection: close 헤더를 통해 알린다.
- GET, POST, HEAD 외에 PUT, DELETE와 같은 메소드를 추가함

### 5. 버전 2.0

- 성능 향상에 초점을 뒀다.
 - 멀리플렉싱 스트림, 헤더 압축, 서버 푸시 등의 기능 추가


### 요약

| 버전   |  GET    | POST    | HEAD  | ETC | 비 지속 연결 |지속 연결 |
|:-------|:-------:|:-------:|:-----:|:-----:|:-----:|:-----:|
| 0.9    |    ○    |   X     |   X   |   X   |   ○    |   X   |
| 1.0    |    ○    |   ○     |   ○   |   X   |   ○    |   X   |
| 1.0+   |    ○    |   ○     |   ○   |   X   |   X   |    ○    |
| 1.1    |    ○    |   ○     |   ○   |   ○   |   X   |    default    | 
| 2.0    |    ○    |   ○     |   ○   |   ○   |   X   |    default     |


## TCP/IP

`TCP/TP` 란 Transmission Control Protocol/Internet Protocol의 줄임말이며   
TCP규약과 IP규약을 합친 프로토콜이다.

### TCP

`TCP` 란 데이터 전달을 관리하는 규약이다.   
즉, 패킷을 조립하거나 손실된 패킷을 확인하고 재전송하도록 요청하는 기능을 한다.

### IP

`IP` 란 인터넷상의 고유한 주소를 말한다.   
우편을 보낼 때 주소를 적는 것과 마찬가지로, 다른 호스트에서 다른 호스트로   
데이터를 전송해줄 때 IP가 우편 주소와 같은 역할을 해준다.

### TCP/IP 계층 

<br>
<br>
<img src="https://k.kakaocdn.net/dn/b61RrM/btqEKxLq16C/TI4NDye9prgotzz20rqKhK/img.png" alt="tcp/ip 계층"  height="350px" />  
<br>
<br>

> 좌 `TCP/IP` 모델 우 `OSI Layer 7` 모델


- 응용 계층 

**HTTP, FTP, SMTP** 등 네트워크를 사용하는 응용 프로그램으로 이루어졌다.

- 전송 계층

**TCP, UDP** 등 시스템을 연결하고 데이터를 전송하는 역할을 한다.

- 인터넷 계층

**ICMP, IGMP, IP** 등 데이터를 정의하고 데이터의 경로를 라우팅한다.

- 물리계층

**Ethernet, ATM** 등 네트워크 하드웨어를 의미한다.


## 통신 방식

네트워크 통신은 TCP/IP 기반의 통신을 근간으로 한다.
`IP` 를 통해 물리적 호스트 대상을 찾고 `PORT`를 통해 논리적 대상을 찾는다.


### 1. 비 지속 연결(Non-Persistent Connection)

비 지속 연결은 HTTP 1.0까지 사용된 방식이다.   
현재는 사용되지 않는데 그 이유는 오늘날의 웹 문서의 경우 인터페이스를 구성하기 위해
많은 리소스가 필요하기 때문이다. 리소스 요청 마다 3-way hand shake를 수행하게되면
그 만큼 여러번의 연결을 끊고 맺음이 발생하기 때문에 상당히 비효율적이다.

> 3-way hand shake 개념 :link: [참고](https://mindnet.tistory.com/entry/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-22%ED%8E%B8-TCP-3-WayHandshake-4-WayHandshake)

### 2. 지속 연결(Persistent Connection)

지속 연결은 비 지속 연결 방식의 문제점을 보완한 새로운 연결 관리 방식이다.   
HTTP 1.0+부터 Keep-Alive 연결을 지원하면서 지속 연결이 가능해졌다.   
여기서 중요한 점은  1.0+와 1.1 둘 다 같은 지속 연결이지만 1.0+는 헤더에 "Connection: Keep-Alive" 가 명시되어
사용했다면 1.1은 별다른 헤더가 필요없이 기본으로 지속 연결이 이루어진다.   
결과적으로 비 지속 연결과 달리 단 한번의 3-way hand shake 과정으로 여러번의 요청과 응답이 가능해지면서
시간이 확연히 단축되었다.


## HTTP 메시지

HTTP 메시지로 웹 브라우저가 요청할 때 보내는 메시지를 요청 메시지(Request Message)라고 부르며,
웹 서버가 HTTP 요청 메시지를 받고 응답할 때 보내는 메시지를 응답 메시지(Response Message)라고 부른다.
메시지 구조는 시작줄, 메시지 헤더, 메시지 바디로 나뉜다. 각 개행 문자를 기준으로 분류를 한다.

### 개행

개행 문자는 텍스트의 한 줄이 끝남을 표시하는 문자 또는 문자열이다. 새 줄 문자 혹은 줄 바꿈 문자라고도 부른다.
OS 혹은 프로토콜 마다 개행 문자의 아스키 값이 다른데 HTTP와 같은 인터넷 프로토콜의 경우 아스키의 CR + LF 개행 문자를
사용하도록 규정하고 있다. CR은 캐리지 리턴(Carriage Return)의 줄임말로 문자는 "\r", Hex 값으로는 "0x0D"으로 표현된다.
LF는 라인 피드(Line Feed)의 줄임말로 문자는 "\n", Hext 값으로는 "0x0A"로 표현된다.

HTTP 통신 상에서는 이러한 개행 문자로 라인을 구분하여 데이터 식별을 하게 된다.

### 요청 메시지(Request Message)

요청 메시지의 구조는 다음과 같다.

1. 시작줄

- 요청 내용을 구체적으로 포함
    - 메소드, 요청URL, 버전 등

2. 메시지 헤더

- 요청의 속성과 추가 정보를 포함

3. 메시지 바디

- 메시지의 데이터가 들어감
    - 데이터 수송을 목적으로 설계

### 응답 메시지(Response Message)

응답 메시지의 구조는 다음과 같다.

1. 시작줄

- 상태 라인
    - 상태 코드, 응답 문구, 버전

2. 메시지 헤더

- 응답의 속성과 추가 정보를 포함

3. 메시지 바디

- 엔티티 바디


## HTTP 메소드

### GET/POST

가장 자주 사용되는 메소드로 클라이언트에서 서버로 데이터를 전달한다.


GET 방식

```
GET http://www.test.com/posts
```

POST 방식

```
(POST)http://www.test.com/posts
```


## HTTP 상태 코드

클라이언트가 요청을 할 경우 서버는 요청에 대한 상세 결과를 알려주는데 이걸 우리는
상태 코드(Status Code)라 부른다. 상태 코드는 3자리 숫자로 구성되어있고 뒤에 응답 문구가 붙는다.
응답 문구는 상태 코드에 대한 설명이다. 모든 상태 코드를 외울 필요는 없고 자주 접하게되는 코드만 외워두면 좋다.

::: details 상태 코드   

**100대 코드: 정보전달**

**200대 코드: 성공응답**

200: OK, 정상   
204: No Content, 보통 특정내용을 삭제시 해당 응답코드를 응답합니다.   
206: Range, 헤더를 지정한 요청을 응답할 때 사용합니다.   

**300대 코드: Redirection, request완료를 위해 추가 동작이 필요합니다.**

301: Moved Permanently, 영구적으로 URI 변경을 의미   
302: Found, 일시적인 URI 이동을 의미   
304: Not Modified, 변경 없음   
307: Temporary Redirect, 임시적인 redirect   

**400대 코드: 클라이언트의 에러**

400: Bad Request, 잘못된 요청   
403: Forbidden, 접근권한없음   
404: Not Found, 요청 내용이 없거나 찾을 수 없음   
408: Request Timeout, 요청 타임아웃   

**500번대 코드: 서버의 에러**

500: Internal Server Error, 서버에러, 로직에러 발생시 자주 등장합니다.   
503: Service Unavailable, 서버 한계 초과등 오류   

:::   
